<div class="space-y-8 animate-fadeIn">
  <!-- Success Header -->
  <div *ngIf="status === 'succeeded'" class="text-center py-6">
    <div class="inline-flex items-center justify-center w-20 h-20 bg-green-100 text-green-600 rounded-full mb-6">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
      </svg>
    </div>
    <h2 class="text-3xl font-black text-slate-900 mb-2">¡Gracias por tu compra!</h2>
    <p class="text-slate-600">Tu pedido ha sido procesado exitosamente.</p>
  </div>

  <!-- Progress/Loading State -->
  <div *ngIf="status === 'processing'" class="text-center py-12">
    <div class="animate-spin inline-block w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full mb-4">
    </div>
    <h2 class="text-xl font-bold text-slate-900">Validando tu pago...</h2>
    <p class="text-sm text-slate-500 mt-2">Casi listo, estamos terminando de procesar los datos.</p>
  </div>

  <!-- Failed State -->
  <div *ngIf="status === 'failed'" class="text-center py-12">
    <div class="inline-flex items-center justify-center w-16 h-16 bg-red-100 text-red-600 rounded-full mb-4">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </div>
    <h2 class="text-xl font-bold text-slate-900">El pago no se pudo completar</h2>
    <p class="text-sm text-slate-500 mt-2">Hubo un error al procesar tu tarjeta. Por favor inténtalo de nuevo.</p>
  </div>

  <!-- Purchase Summary Card -->
  <div class="bg-white rounded-2xl shadow-sm border border-slate-100 divide-y divide-slate-100 overflow-hidden"
    *ngIf="orderId">
    <!-- Header -->
    <div class="p-6">
      <div class="flex items-center justify-between mb-2">
        <span class="text-sm font-bold text-slate-800 uppercase tracking-tight">Resumen de Orden</span>
        <span class="text-xs bg-slate-50 px-3 py-1 rounded-full border border-slate-100 font-mono text-slate-500">
          ID: #{{ orderId.substring(0,8).toUpperCase() }}
        </span>
      </div>
      <p class="text-xs text-slate-400">Gracias por confiar en iCenter</p>
    </div>

    <!-- Items -->
    <div class="p-6 space-y-4" *ngIf="orderItems && orderItems.length > 0">
      <div *ngFor="let item of orderItems" class="flex gap-4">
        <div class="w-16 h-16 bg-slate-50 rounded-lg overflow-hidden flex-shrink-0 border border-slate-100">
          <img [src]="item.image" [alt]="item.name" class="w-full h-full object-cover">
        </div>
        <div class="flex-1 min-w-0">
          <h4 class="text-sm font-bold text-slate-900 truncate">{{ item.name }}</h4>
          <p class="text-xs text-slate-500">Cantidad: {{ item.quantity }}</p>
          <p class="text-xs font-bold text-indigo-600 mt-1">{{ item.price | currency:'PEN' }}</p>
        </div>
        <div class="text-right">
          <p class="text-sm font-black text-slate-900">{{ (item.price * item.quantity) | currency:'PEN' }}</p>
        </div>
      </div>
    </div>

    <!-- Shipping Info -->
    <div class="p-6 bg-slate-50/50" *ngIf="customerInfo">
      <h5 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3">Dirección de Envío</h5>
      <div class="flex gap-3">
        <div
          class="w-8 h-8 bg-white rounded-lg flex items-center justify-center text-slate-400 shadow-sm border border-slate-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </div>
        <div class="flex-1">
          <p class="text-sm font-bold text-slate-800">{{ customerInfo.fullName }}</p>
          <p class="text-xs text-slate-500 leading-relaxed">{{ customerInfo.address }}</p>
          <p class="text-xs text-slate-500">{{ customerInfo.city }}{{ customerInfo.zip ? ', ' + customerInfo.zip : '' }}
          </p>
          <p class="text-[10px] text-slate-400 mt-1 italic">{{ customerInfo.email }} • {{ customerInfo.phone }}</p>
        </div>
      </div>
    </div>

    <!-- Totals -->
    <div class="p-6 bg-slate-50" *ngIf="totals">
      <div class="space-y-2">
        <div class="flex justify-between text-xs text-slate-500">
          <span>Subtotal</span>
          <span>{{ totals.subtotal | currency: (totals.currency || 'PEN') }}</span>
        </div>
        <div class="flex justify-between text-xs text-slate-500">
          <span>Envío</span>
          <span class="text-green-600 font-bold">{{ totals.shippingCost > 0 ? (totals.shippingCost | currency:'PEN') :
            'Gratis' }}</span>
        </div>
        <div class="flex justify-between items-center pt-2 mt-2 border-t border-slate-200">
          <span class="text-sm font-bold text-slate-900">Total Pagado</span>
          <span class="text-2xl font-black text-slate-900 tracking-tight">{{ totals.total | currency: (totals.currency
            || 'PEN') }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="flex flex-col sm:flex-row gap-4 pt-4">
    <a routerLink="/pedidos"
      class="flex-1 rounded-2xl bg-slate-900 py-4 text-center text-sm font-bold text-white hover:bg-black transition-all shadow-xl shadow-slate-200 active:scale-[0.98]">
      Ver mis pedidos
    </a>
    <button *ngIf="status === 'failed'" type="button" (click)="restart.emit()"
      class="flex-1 rounded-2xl border-2 border-slate-200 py-4 text-sm font-bold text-slate-900 hover:bg-slate-50 transition-all active:scale-[0.98]">
      Intentar de nuevo
    </button>
    <a routerLink="/"
      class="flex-1 rounded-2xl border-2 border-slate-100 bg-white py-4 text-center text-sm font-bold text-slate-700 hover:text-indigo-600 transition-all hover:border-indigo-100">
      Seguir comprando
    </a>
  </div>
</div>