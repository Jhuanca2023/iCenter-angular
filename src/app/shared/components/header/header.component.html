<nav class="z-50 w-full py-1 px-6 md:px-16 lg:px-24 xl:px-32">
    <div class="flex items-center justify-between">
      <div class="flex-shrink-0">
        <a routerLink="/" class="flex items-center">
          <span class="text-xl font-bold text-slate-900 uppercase">iCenter</span>
          <span class="w-2 h-2 bg-purple-600 rounded-full ml-1"></span>
        </a>
      </div>

      <div class="hidden md:flex items-center gap-8 absolute left-1/2 transform -translate-x-1/2">
        <a routerLink="/" routerLinkActive="text-slate-900 font-semibold" class="text-slate-400 hover:text-slate-600 transition uppercase text-sm tracking-wide">
          Inicio
        </a>
        <a routerLink="/productos" routerLinkActive="text-slate-900 font-semibold" class="text-slate-400 hover:text-slate-600 transition uppercase text-sm tracking-wide">
          Productos
        </a>
        <div 
          class="relative"
          (mouseenter)="openCategoriesDropdown()"
          (mouseleave)="closeCategoriesDropdown()">
          <button 
            type="button"
            (click)="toggleCategoriesDropdown()"
            [class.text-purple-600]="isCategoriesDropdownOpen"
            [class.text-slate-900]="isCategoriesDropdownOpen"
            class="text-slate-400 hover:text-slate-600 transition uppercase text-sm tracking-wide flex items-center gap-1">
            Categorías
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              width="16" 
              height="16" 
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round"
              [class.rotate-180]="isCategoriesDropdownOpen"
              class="transition-transform duration-200">
              <path d="m6 9 6 6 6-6"/>
            </svg>
          </button>
          
          <div 
            *ngIf="isCategoriesDropdownOpen && categories.length > 0"
            class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-[90vw] max-w-[600px] bg-slate-900 rounded-lg shadow-xl p-4 sm:p-6 z-50">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
              <div *ngFor="let category of categories; let i = index" class="cursor-pointer group">
                <div 
                  (click)="navigateToCategory(category.id)"
                  class="hover:text-purple-400 transition-colors">
                  <h3 class="font-semibold text-white mb-1 group-hover:text-purple-400">
                    {{ category.name }}
                  </h3>
                  <p *ngIf="category.description" class="text-sm text-slate-300">
                    {{ category.description }}
                  </p>
                </div>
              </div>
            </div>
            <div class="mt-6 pt-6 border-t border-slate-700">
              <a 
                routerLink="/categorias"
                (click)="closeCategoriesDropdown()"
                class="text-purple-400 hover:text-purple-300 transition-colors text-sm font-medium inline-flex items-center gap-2">
                Ver todas las categorías
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="m9 18 6-6-6-6"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
        <a routerLink="/events" routerLinkActive="text-slate-900 font-semibold" class="text-slate-400 hover:text-slate-600 transition uppercase text-sm tracking-wide">
          Eventos
        </a>
        <a routerLink="/auth" routerLinkActive="text-slate-900 font-semibold" class="text-slate-400 hover:text-slate-600 transition uppercase text-sm tracking-wide">
          Iniciar Sesión
        </a>
      </div>

      <div class="flex-shrink-0">
        <a routerLink="/auth/register" class="hidden md:flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white hover:bg-slate-800 active:scale-95 transition-all rounded-full text-sm font-medium">
          <span>Registrarse</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M5 12h14"/>
            <path d="m12 5 7 7-7 7"/>
          </svg>
        </a>

        <button type="button" (click)="toggleMenu()" class="md:hidden active:scale-90 transition" aria-label="Abrir menú">
          <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 5h16"/>
            <path d="M4 12h16"/>
            <path d="M4 19h16"/>
          </svg>
        </button>
    </div>
  </div>
</nav>

<div [class]="'fixed inset-0 z-[100] bg-white text-slate-800 flex flex-col items-center justify-center text-lg gap-8 md:hidden transition-transform duration-300 ' + (isMenuOpen ? 'translate-x-0' : '-translate-x-full')">
  <a routerLink="/" (click)="closeMenu()" class="hover:text-slate-900 transition uppercase">
    Inicio
  </a>
  <a routerLink="/productos" (click)="closeMenu()" class="hover:text-slate-900 transition uppercase">
    Productos
  </a>
  <div class="w-full px-8">
    <button 
      type="button"
      (click)="toggleCategoriesDropdown()"
      class="w-full flex items-center justify-between hover:text-slate-900 transition uppercase">
      <span>Categorías</span>
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        width="20" 
        height="20" 
        viewBox="0 0 24 24" 
        fill="none" 
        stroke="currentColor" 
        stroke-width="2" 
        stroke-linecap="round" 
        stroke-linejoin="round"
        [class.rotate-180]="isCategoriesDropdownOpen"
        class="transition-transform duration-200">
        <path d="m6 9 6 6 6-6"/>
      </svg>
    </button>
    <div 
      *ngIf="isCategoriesDropdownOpen && categories.length > 0"
      class="mt-4 w-full bg-slate-50 rounded-lg p-4 max-h-[400px] overflow-y-auto">
      <div class="space-y-3">
        <div 
          *ngFor="let category of categories"
          (click)="navigateToCategory(category.id); closeMenu()"
          class="cursor-pointer p-3 rounded hover:bg-slate-200 transition-colors">
          <h3 class="font-semibold text-slate-900 mb-1">
            {{ category.name }}
          </h3>
          <p *ngIf="category.description" class="text-sm text-slate-600">
            {{ category.description }}
          </p>
        </div>
      </div>
      <a 
        routerLink="/categorias"
        (click)="closeMenu()"
        class="mt-4 block text-center text-purple-600 hover:text-purple-700 transition-colors text-sm font-medium">
        Ver todas las categorías
      </a>
    </div>
  </div>
  <a routerLink="/events" (click)="closeMenu()" class="hover:text-slate-900 transition uppercase">
    Eventos
  </a>
  <a routerLink="/auth" (click)="closeMenu()" class="hover:text-slate-900 transition uppercase">
    Iniciar Sesión
  </a>
  <a routerLink="/auth/register" (click)="closeMenu()" class="flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white hover:bg-slate-800 active:scale-95 transition-all rounded-full text-sm font-medium mt-4">
    <span>Registrarse</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M5 12h14"/>
      <path d="m12 5 7 7-7 7"/>
    </svg>
  </a>
  <button type="button" (click)="closeMenu()" class="absolute top-4 right-4 aspect-square size-10 p-1 items-center justify-center bg-slate-100 hover:bg-slate-200 transition text-black rounded-md flex" aria-label="Cerrar menú">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M18 6 6 18"/>
      <path d="m6 6 12 12"/>
    </svg>
  </button>
</div>
